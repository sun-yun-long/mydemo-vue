(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20ec61"],{b195:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{padding:"10px"}},[a("QueryForm",{ref:"QueryForm",attrs:{model:e.formQuery,formList:e.formList,buttonList:e.buttonList,labelWidth:"auto"}})],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"code",label:"学号",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"地址"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){e.editRow(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(a){e.deleteRow(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:"40%",center:""},on:{"update:visible":function(t){e.dialogVisible=t},closed:e.dialogClosed}},[e.addFormShow?a("addForm",{ref:"addForm",on:{close:function(t){e.dialogVisible=!1},refresh:function(t){e.onQuery()}}}):e._e()],1)],1)},o=[],s=(a("4de4"),a("b64b"),a("b775")),n=a("4328"),r=a.n(n),l=function(e){return Object(s["a"])({url:"/api/list",method:"post",data:r.a.stringify(e)})},d=function(e){return Object(s["a"])({url:"/api/add",method:"post",data:r.a.stringify(e)})},c=function(e){return Object(s["a"])({url:"/api/update",method:"post",data:r.a.stringify(e)})},m=function(e){return Object(s["a"])({url:"/api/delete",method:"post",data:r.a.stringify(e)})},u={list:l,add:d,update:c,_delete:m},f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"formData",staticStyle:{margin:"0 auto",width:"85% !important"},attrs:{model:e.formData,rules:e.formDataRules,"label-width":"100px","label-position":"right"}},[a("el-form-item",{attrs:{label:"学号",prop:"code"}},[a("el-input",{attrs:{size:"small",clearable:"",placeholder:"请输入"},model:{value:e.formData.code,callback:function(t){e.$set(e.formData,"code",t)},expression:"formData.code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{attrs:{size:"small",clearable:"",placeholder:"请输入"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"地址",prop:"address"}},[a("el-input",{attrs:{size:"small",clearable:"",placeholder:"请输入"},model:{value:e.formData.address,callback:function(t){e.$set(e.formData,"address",t)},expression:"formData.address"}})],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{loading:e.btn_loading,size:"small"},on:{click:e.closeDialog}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{loading:e.btn_loading,type:"primary",size:"small"},on:{click:e.submitFormV}},[e._v("确 定")])],1)],1)},p=[],h={components:{},data:function(){return{formType:"",rowData:{},formData:{code:"",name:"",address:""},formDataRules:{code:{required:!0,message:"请填写学号",trigger:"change"},name:{required:!0,message:"请填写姓名",trigger:"change"}},btn_loading:!1}},methods:{init:function(e,t){if(this.formType=e,"edit"==e)for(var a in t&&(this.rowData=JSON.parse(JSON.stringify(t))),this.formData)this.formData[a]=this.rowData[a]||""},submitFormV:function(){var e=this;this.$refs["formData"].validate((function(t){if(!t)return!1;"add"==e.formType?e.submitFormAdd():e.submitFormEdit()}))},submitFormAdd:function(){var e=this,t=JSON.parse(JSON.stringify(this.formData));this.btn_loading=!0,u.add(t).then((function(t){e.btn_loading=!1;var a=t.status,i=t.message;200===a?(e.$message({type:"success",message:"新增成功"}),e.$emit("refresh"),e.$emit("close")):e.$message({type:"error",message:i||"新增失败"})})).catch((function(t){e.btn_loading=!1,console.log(t,"错误提示")}))},submitFormEdit:function(){var e=this,t=JSON.parse(JSON.stringify(this.formData));t.id=this.rowData.id,this.btn_loading=!0,u.update(t).then((function(t){e.btn_loading=!1;var a=t.status,i=t.message;200===a?(e.$message({type:"success",message:"编辑成功"}),e.$emit("refresh"),e.$emit("close")):e.$message({type:"error",message:i||"编辑失败"})})).catch((function(t){e.btn_loading=!1,console.log(t,"错误提示")}))},closeDialog:function(){this.$emit("close")}}},b=h,g=a("2877"),v=Object(g["a"])(b,f,p,!1,null,"bc41e3e0",null),y=v.exports,_={components:{addForm:y},data:function(){return{formQuery:{code:"",name:"",address:""},formList:[{prop:"code",label:"学号",clearable:!0},{prop:"name",label:"姓名",clearable:!0},{prop:"address",label:"地址",clearable:!0}],buttonList:[{name:"查询",type:"primary",size:"small",icon:"el-icon-search",loading:!1,click:this.onQuery},{name:"重置",size:"small",click:this.chongzhi},{name:"新增",size:"small",click:this.openAdd}],tableData:[],dialogTitle:"",dialogVisible:!1,addFormShow:!1}},mounted:function(){this.onQuery()},methods:{onQuery:function(){var e=this,t=JSON.parse(JSON.stringify(this.formQuery));u.list(t).then((function(t){var a=t.status,i=(t.message,t.data);200===a&&(e.tableData=i)}))},chongzhi:function(){var e={code:"1",name:"1"},t=[{code:"123",name:"name001"},{code:"111",name:"name002"},{code:"122",name:"name012"},{code:"222",name:"name012"}],a=t.filter((function(t){var a=0;for(var i in e)e[i]?t[i]&&-1!=t[i].indexOf(e[i])&&a++:a++;if(a===Object.keys(e).length)return t}));console.log(a)},editRow:function(e){var t=this,a=JSON.parse(JSON.stringify(e));this.dialogTitle="编辑",this.dialogVisible=!0,this.addFormShow=!0,this.$nextTick((function(){t.$refs.addForm.init("edit",a)}))},deleteRow:function(e){var t=this,a={id:e.id};u._delete(a).then((function(e){var a=e.status,i=e.message;200===a?(t.$message({type:"success",message:"删除成功"}),t.onQuery()):t.$message({type:"error",message:i||"删除失败"})}))},openAdd:function(){var e=this;this.dialogTitle="新增",this.dialogVisible=!0,this.addFormShow=!0,this.$nextTick((function(){e.$refs.addForm.init("add",null)}))},dialogClosed:function(){this.addFormShow=!1}}},w=_,D=Object(g["a"])(w,i,o,!1,null,null,null);t["default"]=D.exports}}]);